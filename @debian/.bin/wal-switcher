#!/bin/sh

# Custom rofi script to change wallpaper and scheme generated by pyal.
# Credits to ilsenatorov for the idea

PATH="$HOME/.anyenv/envs/pyenv/shims:$PATH"
WALLPAPER_PATH=~/Pictures/wallpapers/

mkdir -p $WALLPAPER_PATH

if [ -z $@ ]
then
    get_themes()
    {
        ls $WALLPAPER_PATH
    }
    echo random; get_themes
else
    THEMES=$@

    # fetch random wallpaper from unsplash
    if [ x"random" = x"${THEMES}" ]
    then
        curl -o "$WALLPAPER_PATH/today" -J -L "https://source.unsplash.com/random/1920x1200" > /dev/null 2>&1
        wal -o ~/.bin/wal-changer -i "$WALLPAPER_PATH/today" > /dev/null

    # generate schemes based on selected wallpaper
    elif [ -n "${THEMES}" ]
    then
        wal -o ~/.bin/wal-changer -i $WALLPAPER_PATH${THEMES} > /dev/null
    fi
fi
