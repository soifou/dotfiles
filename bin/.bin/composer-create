#!/bin/bash

# This script is a wrapper for quickly create a composer project
# $ composer-create [framework] [project-name]

COMPOSER_ARGS="--no-progress --profile --prefer-dist"
d=$'\e[33m'
t=$'\e[0m'

if [[ $1 == "" && $2 == "" ]]; then
	echo ""
	echo "Missing arguments!"
	echo "$d [!] $ composer-create [symfony4|symfony3|laravel|grav] [project-name] $t"
	echo ""
	exit 0
fi

if [[ $1 == *"symfony4"*  ]]; then
	# @NOTE: to install v4.0 (not v3.4), php cli must have version 7.2
	composer create-project symfony/skeleton $2
	cd $2
	composer require --dev profiler
	composer require --dev maker
	composer require annotations
	composer require twig
	composer require asset
	composer require logger
	composer require encore
	composer require orm
	composer require form
	composer require validator
	composer require security
	# composer require symfony/serializer
	echo "Symfony 4 is init!"

elif [[ $1 == *"symfony3"* ]]; then
	composer create-project symfony/framework-standard-edition $2 "$COMPOSER_ARGS"
	echo "Symfony 3 is init!"

elif [[ $1 == *"laravel"* ]]; then
	composer create-project laravel/laravel $2 "$COMPOSER_ARGS"
	echo "Laravel is init!"

elif [[ $1 == *"grav"* ]]; then
	composer create-project getgrav/grav $2 "$COMPOSER_ARGS"
	echo "Grav is init!"

else
	echo "Unknown framework! Valid are: [symfony4|symfony3|laravel|grav]"
fi
